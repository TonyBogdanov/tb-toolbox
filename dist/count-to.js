(function(e){"use strict";if("function"!=typeof e){alert("CountTo requires jQuery.");return}if("function"!=typeof e.frame){alert("CountTo requires Frame.");return}e.countTo={resolveOption:function(t,n,r){var i=n.split("-");if("data"!=i[0]||"count"!=i[1])return{};i.shift(),i.shift();var s=r,o;return e.each(i.reverse(),function(){o=s,s={},s[this]=o}),e.extend({},t,s)},resolveEasing:function(t){if("string"==typeof t){if("undefined"!=typeof jQuery.easing[t])return jQuery.easing[t];var n=t.split(/[^0-9\.]+/);if("string"==typeof n[0]&&"string"==typeof n[1]&&"string"==typeof n[2]&&"string"==typeof n[3]&&!isNaN(parseFloat(n[0]))&&!isNaN(parseFloat(n[1]))&&!isNaN(parseFloat(n[2]))&&!isNaN(parseFloat(n[3])))return e.countTo.resolveEasing([parseFloat(n[0]),parseFloat(n[1]),parseFloat(n[2]),parseFloat(n[3])])}return"object"==typeof t&&"number"==typeof t[0]&&"number"==typeof t[1]&&"number"==typeof t[2]&&"number"==typeof t[3]&&"undefined"!=e.bez?jQuery.easing[e.bez(t)]:jQuery.easing.linear},resolveTrigger:function(t,n){if("string"==typeof t)return e.countTo.resolveTrigger({type:t});if("object"==typeof t&&"string"==typeof t["type"])switch(t.type){case"immediate":return"undefined"!=typeof t["delay"]&&!isNaN(parseInt(t.delay))&&isFinite(parseInt(t.delay))?function(e){return function(t){setTimeout(t,e)}}(parseInt(t.delay)):function(e){e()};case"viewport":return function(t,r){return function(i){e.each(n,function(){var n=e(this),s=function(){var o=e(window),u=o.scrollTop(),a=u+o.height(),f=n.offset().top,l=f+n.height(),c=Math.max(0,Math.min(1,(Math.min(a,l)-Math.max(u,f))/Math.min(a-u,l-f)));c>=t&&(e.frame.detach(window,"scroll",s),0==r?i():setTimeout(i,r))};e.frame("scroll",s)})}}("undefined"!=typeof t["visible"]&&!isNaN(parseFloat(t.visible))&&isFinite(parseFloat(t.visible))?Math.max(0,Math.min(1,parseFloat(t.visible))):1e-5,"undefined"!=typeof t["delay"]&&!isNaN(parseInt(t.delay))&&isFinite(parseInt(t.delay))?parseInt(t.delay):0)}return e.countTo.resolveTrigger({type:"immediate"})},resolveFormatter:function(t){if("function"==typeof t)return t;var n=e.extend({},e.countTo.defaults.format);if("object"==typeof t){if("number"==typeof t["decimals"]||"string"==typeof t["decimals"]&&!isNaN(parseInt(t.decimals))&&isFinite(parseInt(t.decimals)))n.decimals=Math.abs(parseInt(t.decimals));"boolean"==typeof t["trimZeroes"]&&(n.trimZeroes=t.trimZeroes),"string"==typeof t["trimZeroes"]&&("true"==t["trimZeroes"]||"false"==t["trimZeroes"])&&(n.trimZeroes="true"==t["trimZeroes"]),"object"==typeof t["point"]&&("string"==typeof t["point"]["decimals"]&&(n.point.decimals=t.point.decimals),"string"==typeof t["point"]["thousands"]&&(n.point.thousands=t.point.thousands))}return function(e){return function(t){t=(t+"").replace(/[^0-9+\-Ee.]/g,"");var n=isFinite(+t)?+t:0,r="",i=function(e,t){var n=Math.pow(10,t);return""+(Math.round(e*n)/n).toFixed(t)};return r=(e.decimals?i(n,e.decimals):""+Math.round(n)).split("."),r[0].length>3&&(r[0]=r[0].replace(/\B(?=(?:\d{3})+(?!\d))/g,e.point.thousands)),(r[1]||"").length<e.decimals&&(r[1]=r[1]||"",r[1]+=(new Array(e.decimals-r[1].length+1)).join("0")),e.trimZeroes&&(r[0]="0"==r[0]?"0":r[0].replace(/^0+/,""),"undefined"!=typeof r[1]&&(r[1]="0"==r[1]?"0":r[1].replace(/0+$/,""))),r.join(e.point.decimals)}}(n)},resolveMutator:function(t){if("function"==typeof t)return t;if("string"==typeof t)switch(t){case"text":return function(t,n){return e(t).each(function(){e(this).text(n)})}}return function(t,n){return e(t).each(function(){e(this).html(n)})}},animate:function(t,n,r,i){if(!0===i)return;"undefined"==typeof r&&(r=(new Date).getTime());var s=(new Date).getTime(),o=(s-r)/t;o>=1&&(o=1,i=!0),n.call(o),e.frame(function(){e.countTo.animate(t,n,r,i)})},defaults:{from:0,duration:1e3,easing:"linear",format:{decimals:0,trimZeroes:!0,point:{decimals:"",thousands:""}},mutator:"html",trigger:"immediate"}},e.fn.countTo=function(t){t=e.extend({},e.countTo.defaults,t),t.from=parseFloat(t.from),t.to=parseFloat(t.to),t.duration=parseInt(t.duration);var n=this,r=e.countTo.resolveEasing(t.easing),i=e.countTo.resolveFormatter(t.format),s=e.countTo.resolveMutator(t.mutator),o=e.countTo.resolveTrigger(t.trigger,n);o(function(t,n){return function(){e.countTo.animate(t.duration,function(){s(n,i(r(this,this,0,1,1)*(t.to-t.from)+t.from))})}}(t,n))},e.frame("ready",function(){e("[data-count-to]").each(function(){var t={};e.each(this.attributes,function(){var n=this.name.split("-"),r=this.value;for(var i=n.length-1;i>=0;i--){var s=r;r={},r[n[i]]=s}t=e.extend(!0,{},t,r)}),e(this).countTo("undefined"==typeof t["data"]||"undefined"==typeof t["data"]["count"]?{}:t.data.count)})})})(jQuery);